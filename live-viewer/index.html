<!doctype html>
<meta charset="utf-8">
<title>Live URL Viewer</title>
<link rel="stylesheet" href="style.css">

<script>
// whatwg-url.js depends on SharedArrayBuffer.prototype.byteLength having a getter, but Safari
// doesn't support SharedArrayBuffer. Since the dependency is just for type-checking code in
// https://github.com/jsdom/webidl-conversions which isn't actually exercised, we can stub it out.
if (!window.SharedArrayBuffer) {
  window.SharedArrayBuffer = {
    prototype: {
      get byteLength() { }
    }
  };
}
</script>
<script src="whatwg-url.js"></script>

<h1>Live URL Viewer</h1>

<p>The output below will display a URL's parsed components from the browser versus those given by
<a href="https://github.com/jsdom/whatwg-url">jsdom/whatwg-url</a>.

<p>jsdom/whatwg-url closely follows the <a href="http://url.spec.whatwg.org/">URL Standard</a> and
the associated
<a href="https://github.com/w3c/web-platform-tests/tree/master/url">web-platform-tests</a>, so this
serves as a good comparison versus the standard itself.

<p>The output will be colored <span class="pass">dark green</span> unless a difference occurs
between the two parsers in which case the affected URL component will be colored
<span class="fail">red</span>.

<form>
  <label for="url">URL:</label>
  <input id="url" value="https://example.com/" autofocus>

  <label for="base">Base URL:</label>
  <input id="base" value="about:blank">
</form>

<h2>Browser's URL components</h2>

<table class="output" id="browser-output">
  <tr id="href"><th>href</th><td></td></tr>
  <tr id="protocol"><th>protocol</th><td></td></tr>
  <tr id="username"><th>username</th><td></td></tr>
  <tr id="password"><th>password</th><td></td></tr>
  <tr id="port"><th>port</th><td></td></tr>
  <tr id="hostname"><th>hostname</th><td></td></tr>
  <tr id="pathname"><th>pathname</th><td></td></tr>
  <tr id="search"><th>search</th><td></td></tr>
  <tr id="hash"><th>hash</th><td></td></tr>
</table>

<p class="output error" id="browser-error"></p>

<h2>jsdom/whatwg-url's components</h2>

<table class="output" id="jsdom-output">
  <tr id="href"><th>href</th><td></td></tr>
  <tr id="protocol"><th>protocol</th><td></td></tr>
  <tr id="username"><th>username</th><td></td></tr>
  <tr id="password"><th>password</th><td></td></tr>
  <tr id="port"><th>port</th><td></td></tr>
  <tr id="hostname"><th>hostname</th><td></td></tr>
  <tr id="pathname"><th>pathname</th><td></td></tr>
  <tr id="search"><th>search</th><td></td></tr>
  <tr id="hash"><th>hash</th><td></td></tr>
</table>

<p class="output error" id="jsdom-error"></p>

<footer>
  <a href="https://github.com/jsdom/whatwg-url/tree/master/live-viewer">Fork me on GitHub!</a>
</footer>

<iframe hidden id="browser-iframe"></iframe>

<script src="live-viewer.js"></script>
